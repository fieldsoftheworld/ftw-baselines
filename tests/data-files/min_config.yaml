trainer:
  max_epochs: 1
  limit_train_batches: 2
  limit_val_batches: 2
  limit_test_batches: 2
  log_every_n_steps: 2
  num_sanity_val_steps: 0
  accelerator: cpu
  devices: 1
  enable_progress_bar: false
  default_root_dir: tests/logs/FTW-CI
  callbacks:
    - class_path: lightning.pytorch.callbacks.ModelCheckpoint
      init_args:
        monitor: val_loss
        mode: min
        save_top_k: 0
        save_last: true
        filename: "{epoch}-{val_loss:.2f}"
model:
  class_path: ftw_tools.torchgeo.trainers.CustomSemanticSegmentationTask
  init_args:
    class_weights: [0.31, 0.68]
    loss: "ce"
    model: "unet"
    backbone: "efficientnet-b3"
    weights: true
    patch_weights: false
    in_channels: 8
    num_classes: 2
    num_filters: 64
    ignore_index: 3
    lr: 1e-3
    patience: 100
data:
  class_path: ftw_tools.torchgeo.datamodules.FTWDataModule
  init_args:
    batch_size: 4
    num_workers: 3
    train_countries:
      - rwanda
    val_countries:
      - rwanda
    test_countries:
      - rwanda
  dict_kwargs:
    root: data/ftw
    load_boundaries: false
seed_everything: 7
